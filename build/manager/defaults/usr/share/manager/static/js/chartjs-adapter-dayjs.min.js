/*!
 * chartjs-adapter-dayjs-4 v1.0.4
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */
(function (Chart, dayjs) {
    'use strict';

    var FORMATS = {
        datetime: 'MMM D, YYYY, h:mm:ss a',
        millisecond: 'h:mm:ss.SSS a',
        second: 'h:mm:ss a',
        minute: 'h:mm a',
        hour: 'hA',
        day: 'MMM D',
        week: 'll',
        month: 'MMM YYYY',
        quarter: '[Q]Q - YYYY',
        year: 'YYYY',
    };

    Chart._adapters._date.override({
        formats: function () {
            return FORMATS;
        },

        parse: function (value, format) {
            if (value === null || typeof value === 'undefined') {
                return null;
            }

            if (typeof value === 'string' && typeof format === 'string') {
                value = dayjs(value, format);
            } else if (!(value instanceof dayjs)) {
                value = dayjs(value);
            }

            return value.isValid() ? value.valueOf() : null;
        },

        format: function (time, format) {
            return dayjs(time).format(format);
        },

        add: function (time, amount, unit) {
            return dayjs(time).add(amount, unit).valueOf();
        },

        diff: function (max, min, unit) {
            return dayjs(max).diff(dayjs(min), unit);
        },

        startOf: function (time, unit, weekday) {
            if (unit === 'isoWeek') {
                weekday = typeof weekday === 'number' && weekday > 0 && weekday < 7 ? weekday : 1;
                return dayjs(time).isoWeekday(weekday).startOf('day').valueOf();
            }
            return dayjs(time).startOf(unit).valueOf();
        },

        endOf: function (time, unit) {
            return dayjs(time).endOf(unit).valueOf();
        }
    });

})(window.Chart, window.dayjs);
